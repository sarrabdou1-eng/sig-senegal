<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SIG S√©n√©gal - Syst√®me d'Information G√©ographique</title>
        
        <!-- Leaflet CSS -->
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/L.Control.Locate.min.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/MarkerCluster.css">
        <link rel="stylesheet" href="css/MarkerCluster.Default.css">
        <link rel="stylesheet" href="css/leaflet.photon.css">
        <link rel="stylesheet" href="css/leaflet-measure.css">
        
        <!-- Application CSS -->
        <link rel="stylesheet" href="css/app.css">
        <link rel="manifest" href="manifest.json">
        <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            html, body { width: 100%; height: 100%; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
            #map { width: 100%; height: 100%; }
        </style>
    </head>
    <body>
        <!-- Navigation Bar -->
        <nav class="navbar">
            <div class="navbar-container">
                <div class="navbar-brand">
                    <span class="brand-icon">üó∫Ô∏è</span>
                    <h1>SIG S√©n√©gal</h1>
                </div>
                <ul class="navbar-menu">
                    <li><a href="#" class="nav-link" data-page="home"><i class="fas fa-home"></i> Accueil</a></li>
                    <li><a href="#" class="nav-link" data-page="about"><i class="fas fa-info-circle"></i> √Ä propos</a></li>
                    <li><a href="#" class="nav-link" data-page="spatial"><i class="fas fa-search"></i> Requ√™te Spatiale</a></li>
                    <li><a href="#" class="nav-link" data-page="attribute"><i class="fas fa-table"></i> Requ√™te Attributaire</a></li>
                    <li><a href="#" class="nav-link" data-page="download"><i class="fas fa-download"></i> T√©l√©charger</a></li>
                    <li><a href="#" class="nav-link" data-page="tools"><i class="fas fa-tools"></i> Outils</a></li>
                    <li><button id="geolocate-btn" class="nav-link" title="Ma position"><i class="fas fa-crosshairs"></i> G√©olocalisation</button></li>
                </ul>
            </div>
        </nav>

        <!-- Main Container -->
        <div class="main-container">
            <!-- Left Panel - Layers Control -->
            <div class="left-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-layer-group"></i> Couches</h3>
                    <button class="panel-toggle" title="Fermer le panneau"><i class="fas fa-times"></i></button>
                </div>
                <div class="panel-content" id="layers-panel">
                    <!-- Layers will be populated here -->
                </div>
            </div>

            <!-- Map Container -->
            <div class="map-container">
                <div id="map"></div>
                
                <!-- Coordinates Display -->
                <div class="coordinates-display">
                    <div class="coord-item">
                        <label>Latitude:</label>
                        <span id="lat">0.000000</span>
                    </div>
                    <div class="coord-item">
                        <label>Longitude:</label>
                        <span id="lng">0.000000</span>
                    </div>
                    <div class="coord-item">
                        <label>Zoom:</label>
                        <span id="zoom">10</span>
                    </div>
                </div>

                <!-- Dynamic Scale -->
                <div class="dynamic-scale" id="dynamic-scale">
                    <div class="scale-bar">
                        <div class="scale-content">
                            <span class="scale-text" id="scale-text">1 km</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Basemaps & Legend -->
            <div class="right-panel">
                <div class="panel-tabs">
                    <button class="tab-button active" data-tab="basemaps">
                        <i class="fas fa-map"></i> Fonds
                    </button>
                    <button class="tab-button" data-tab="legend">
                        <i class="fas fa-key"></i> L√©gende
                    </button>
                </div>

                <!-- Basemaps Tab -->
                <div class="tab-content active" id="basemaps-tab">
                    <div class="basemaps-container" id="basemaps-container">
                        <!-- Basemaps will be populated here -->
                    </div>
                </div>

                <!-- Legend Tab -->
                <div class="tab-content" id="legend-tab">
                    <div class="legend-container" id="legend-container">
                        <!-- Legend will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Pages -->
        <div class="modal" id="pageModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle"></h2>
                    <button class="modal-close" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body" id="modalBody"></div>
            </div>
        </div>
        <!-- Leaflet Scripts -->
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/L.Control.Locate.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet.photon.js"></script>
        <script src="js/leaflet-measure.js"></script>
        <script src="js/leaflet.markercluster.js"></script>
        <script src="js/qgis2web_expressions.js"></script>

        <!-- GeoJSON Data -->
        <script src="data/Region_0.js"></script>
        <script src="data/Departement_1.js"></script>
        <script src="data/Arrondissement_2.js"></script>
        <script src="data/Routes_3.js"></script>
        <script src="data/Hydrographie_4.js"></script>
        <script src="data/localites_5.js"></script>

        <!-- Configuration et Application Scripts -->
        <script src="js/config.js"></script>
        <script src="js/utils.js"></script>
        <script src="js/app.js"></script>

        <!-- Service Worker Registration -->
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js')
                        .then(registration => {
                            console.log('Service Worker registered:', registration);
                        })
                        .catch(error => {
                            console.log('Service Worker registration failed:', error);
                        });
                });
            }
        </script>
    </body>
</html>
